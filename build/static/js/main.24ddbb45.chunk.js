(this.webpackJsonpforum=this.webpackJsonpforum||[]).push([[0],{100:function(e,t,s){},101:function(e,t,s){},102:function(e,t,s){},105:function(e,t,s){},106:function(e,t,s){"use strict";s.r(t);var a,o,n,r,i=s(1),l=s.n(i),c=s(26),u=s.n(c),d=(s(53),s(18)),h=s(10),m=s(20),b=s(3),p=s.n(b),j=s(9),f=s(5),v=s(6),O=s(2),x=s(8),g=s(7),y=(s(55),s.p+"static/media/authImg.3dc77678.png"),k=s(16),N=s(48),w=Object(N.a)({name:"auth",initialState:{user:null},reducers:{loginUser:function(e,t){e.user=t.payload},logoutUser:function(e){e.user=null}}}),C=w.actions,S=C.loginUser,A=C.logoutUser,T=w.reducer,B=s(0),I=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(){return Object(f.a)(this,s),t.apply(this,arguments)}return Object(v.a)(s,[{key:"render",value:function(){return Object(B.jsxs)("div",{className:"alert alert-".concat(this.props.alertStyle," alert-dismissible fade show"),role:"alert",children:[this.props.alertDialog,Object(B.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:this.props.resetAlert})]})}}]),s}(i.Component),P=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={authType:"SIGNUP",authLink:"Login here..",userName:"",email:"",password:"",showAlert:!1,alertStyle:"",alertDialog:""},a.handleAuth=a.handleAuth.bind(Object(O.a)(a)),a.changeAuthType=a.changeAuthType.bind(Object(O.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(O.a)(a)),a.returnHome=a.returnHome.bind(Object(O.a)(a)),a.resetAlert=a.resetAlert.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.history.location.state;void 0!==e&&null!==e.fromAuth&&this.setState({authType:"LOGIN",authLink:"Sign up here.."})}},{key:"handleAuth",value:function(e){var t=this;e.preventDefault();var s={email:this.state.email,password:this.state.password};"SIGNUP"===this.state.authType&&(s.userName=this.state.userName),fetch("/auth",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(){var e=Object(j.a)(p.a.mark((function e(t){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return s=e.sent,e.abrupt("return",{status:t.status,data:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){200===e.status||201===e.status?(t.props.dispatch(S(e.data.message)),t.props.history.goBack()):t.setState({showAlert:!0,alertStyle:"danger",alertDialog:e.data.message})})).catch((function(e){return console.log(e)}))}},{key:"resetAlert",value:function(){this.setState({showAlert:!1,alertStyle:"",alertDialog:""})}},{key:"changeAuthType",value:function(e){"SIGNUP"===this.state.authType?this.setState({authType:"LOGIN",authLink:"Sign up here..."}):this.setState({authType:"SIGNUP",authLink:"Login here..."})}},{key:"returnHome",value:function(){this.props.history.push("/")}},{key:"handleInputChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return Object(B.jsx)("div",{id:"auth position-relative",children:Object(B.jsx)("div",{className:"authContainer w-100 p-3 position-absolute top-50 start-50 translate-middle",children:Object(B.jsxs)("div",{className:"auth d-flex justify-content-center",children:[Object(B.jsx)("div",{className:"authImg",children:Object(B.jsx)("img",{src:y,alt:"brand"})}),Object(B.jsxs)("div",{className:"authForm",children:[Object(B.jsx)("div",{className:"text-end mb-3 formBackBtn",onClick:this.returnHome,children:"Home"}),this.state.showAlert&&Object(B.jsx)(I,{alertStyle:this.state.alertStyle,alertDialog:this.state.alertDialog,resetAlert:this.resetAlert}),Object(B.jsx)("h1",{className:"text-center",children:"Forum"}),Object(B.jsx)("p",{className:"text-center",children:"Where book lovers unite!"}),Object(B.jsxs)("form",{onSubmit:this.handleAuth,children:["SIGNUP"===this.state.authType&&Object(B.jsx)("input",{className:"d-block mb-3 w-100",type:"text",name:"userName",id:"userName",placeholder:"Username",required:!0,onChange:function(t){e.handleInputChange(t)}}),Object(B.jsx)("input",{className:"d-block mb-3 w-100",type:"email",name:"email",id:"email",placeholder:"Email",onChange:function(t){e.handleInputChange(t)},required:!0}),Object(B.jsx)("input",{className:"d-block mb-3 w-100",type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(t){e.handleInputChange(t)},required:!0}),Object(B.jsxs)("div",{className:"authOptions d-flex",children:[Object(B.jsx)("button",{className:"btn rounded-pill mb-3",type:"submit",children:"SIGNUP"===this.state.authType?"Sign Up":"Login"}),Object(B.jsx)("button",{type:"button",className:"mb-3",onClick:this.changeAuthType,children:this.state.authLink})]})]})]})]})})})}}]),s}(i.Component),F=Object(h.f)(Object(k.b)((function(e){return{user:e.Auth.user}}))(P)),E=(s(62),s(46)),L=s.n(E),D=s(11),M=Object(D.c)({Auth:T}),R=Object(D.e)(M,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),U=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={searchVal:"",value:""},a.execSearch=a.execSearch.bind(Object(O.a)(a)),a.getForums=a.getForums.bind(Object(O.a)(a)),a.goToProfile=a.goToProfile.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("/confirmAuth",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(j.a)(p.a.mark((function e(t){var s,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return s=e.sent,a={data:s,status:t.status},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){200===t.status?e.props.dispatch(S(t.data.message)):(e.props.dispatch(A()),"/forum"!==e.props.location.pathname&&"/results"!==e.props.location.pathname&&e.props.history.push("/"))})).catch((function(e){return console.log(e)}))}},{key:"getForums",value:function(e){var t=this;fetch("/getForumsByQuery",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}).then(function(){var e=Object(j.a)(p.a.mark((function e(s){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.json();case 2:a=e.sent,200===s.status?t.props.history.push({pathname:"/results",state:{fetched:a.message.results}}):console.log(a.message);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}},{key:"execSearch",value:function(e){var t=this;e.preventDefault();for(var s=this.state.searchVal,a="",o="",n=0;n<s.length;n++)" "===s[n]?a+="+":a+=s[n];if("FORUM"===this.state.value)this.getForums(s);else{switch(this.state.value){case"TITLE":o="intitle:";break;case"AUTHOR":o="inauthor:";break;case"ISBN":o="isbn:"}L.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(o).concat(a,"&maxResults=").concat(40,"&key=").concat("AIzaSyB11h7GIUldk-gdBElP_NCfT0qcW4a71RU")).then(function(){var e=Object(j.a)(p.a.mark((function e(t){var s,a,o,n,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data.items;case 2:for(s=e.sent,a=[],o=0;o<(null===s||void 0===s?void 0:s.length);o++)n=s[o].volumeInfo,(r=null===n||void 0===n?void 0:n.imageLinks)&&(r=Object.values(null===n||void 0===n?void 0:n.imageLinks)),i={title:n.title,authors:n.authors,categories:n.categories,imageLinks:r},a.push(i);return e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){t.props.history.push({pathname:"/results",state:{fromAPI:!0,received:e}})})).catch((function(e){return console.log(e)}))}}},{key:"goToProfile",value:function(){null==R.getState().Auth.user?this.props.history.push("/auth"):this.props.history.push("/profile")}},{key:"render",value:function(){var e=this;return Object(B.jsx)("nav",{className:"navbar navbar-expand-md navbar-light",children:Object(B.jsxs)("div",{className:"container-fluid p-0",children:[Object(B.jsx)("div",{className:"navColorBlock"}),Object(B.jsx)("p",{onClick:function(){e.props.history.push("/")},className:"navbar-brand m-0 p-0 w-25 text-center text-md-start",children:"Forum"}),Object(B.jsx)("button",{className:"navbar-toggler me-3",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(B.jsx)("span",{className:"navbar-toggler-icon"})}),Object(B.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(B.jsxs)("ul",{className:"navbar-nav d-flex justify-content-between align-items-center w-100",children:[Object(B.jsx)("li",{className:"nav-item w-75",children:Object(B.jsx)("div",{className:"searchBar",children:Object(B.jsxs)("form",{onSubmit:this.execSearch,children:[Object(B.jsxs)("select",{value:this.state.value,onChange:function(t){e.setState({value:t.target.value})},className:"form-select",children:[Object(B.jsx)("option",{value:"SELECT",children:"Select"}),Object(B.jsx)("option",{value:"FORUM",children:"Forum"}),Object(B.jsx)("option",{value:"TITLE",children:"Title"}),Object(B.jsx)("option",{value:"AUTHOR",children:"Author"}),Object(B.jsx)("option",{value:"ISBN",children:"ISBN"})]}),Object(B.jsx)("input",{onChange:function(t){e.setState({searchVal:t.target.value})},className:"form-control",type:"text",name:"query",id:"query",required:!0}),Object(B.jsx)("button",{type:"submit",className:"btn",children:"Search"})]})})}),Object(B.jsx)("li",{className:"nav-item ms-3",children:Object(B.jsxs)("div",{onClick:this.goToProfile,className:"avatarContainer",children:[Object(B.jsx)("div",{className:"avatar text-center d-flex justify-content-center align-items-center",children:Object(B.jsx)("h1",{className:"mb-0",children:"F"})}),Object(B.jsx)("span",{children:"My Account"})]})})]})})]})})}}]),s}(i.Component),q=Object(h.f)(Object(k.b)((function(e){return{user:e.Auth.user}}))(U)),V=(s(81),s.p+"static/media/spotlight.fd6623fc.png"),_=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={headerForum:{},bookClubRef:""},a.checkoutBookClub=a.checkoutBookClub.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"checkoutBookClub",value:function(){this.props.history.push({pathname:"/forum",state:{forum:this.state.headerForum,bookClubRef:this.state.bookClubRef}})}},{key:"componentDidMount",value:function(){var e=this;fetch("/popHeader",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(j.a)(p.a.mark((function t(s){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.json();case 2:a=t.sent,200===s.status?e.setState({headerForum:a.message.forum,bookClubRef:a.message.bookClubRef}):console.log(a.message);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e,t,s,a,o=this;return Object(B.jsx)("div",{id:"header",className:"container-fluid",children:Object(B.jsxs)("div",{className:"row h-100",children:[Object(B.jsxs)("div",{className:"col-sm-12 col-md-6 headerImg py-5 pe-4  ps-5 d-flex position-relative",children:[Object(B.jsx)("img",{className:"p-0 w-75",src:V,alt:"books"}),Object(B.jsx)("img",{className:"p-0 w-50  position-relative rounded-3",src:null===(e=this.state.headerForum.book)||void 0===e?void 0:e.imgLink,alt:"book"})]}),Object(B.jsxs)("div",{className:"col-sm-12 col-md-6 py-5 pe-5  ps-4",children:[Object(B.jsxs)("div",{className:"headerDets",children:[Object(B.jsx)("h1",{children:null===(t=this.state.headerForum.book)||void 0===t?void 0:t.title}),Object(B.jsxs)("h3",{className:"mb-3",children:["by ",null===(s=this.state.headerForum.book)||void 0===s?void 0:s.author]}),Object(B.jsx)("button",{className:"btn rounded-pill",onClick:this.checkoutBookClub,children:"Checkout Book Club!"})]}),Object(B.jsxs)("div",{className:"headerExplore mt-4 mt-md-5",children:[Object(B.jsx)("h3",{children:"Explore Book Clubs in Related Genres"}),null===(a=this.state.headerForum.book)||void 0===a?void 0:a.searchCats.map((function(e,t){return Object(B.jsx)("button",{className:"btn cat-btn rounded-pill",onClick:o.viewCategory,children:e},t)}))]})]})]})})}}]),s}(i.Component),G=Object(h.f)(_),H=s(34),J=(s(82),s(83),s(84),s(47)),z=s.n(J),Y=(s(100),function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).truncate=a.truncate.bind(Object(O.a)(a)),a.expandForum=a.expandForum.bind(Object(O.a)(a)),a.collapseForum=a.collapseForum.bind(Object(O.a)(a)),a.state={expand:!1},a}return Object(v.a)(s,[{key:"expandForum",value:function(){this.setState({expand:!0})}},{key:"collapseForum",value:function(){this.setState({expand:!1})}},{key:"truncate",value:function(e,t){if(e.length<=t)return e;for(var s=[],a=0;a<t;a++)s.push(e[a]);return s.push("..."),s}},{key:"render",value:function(){var e;return Object(B.jsxs)("div",{onMouseOver:this.expandForum,onMouseLeave:this.collapseForum,className:"forumContainer position-relative",children:[Object(B.jsx)("button",{className:"btn rounded-pill position-absolute",onClick:this.props.goTo,children:"View"}),Object(B.jsxs)("div",{className:"forum position-relative d-flex",children:[Object(B.jsx)("div",{className:"forumCover rounded-3 d-flex justify-content-center align-items-center "+(this.state.expand?"expandForum":""),style:{backgroundImage:this.props.forum.book.imgLink?"url(".concat(this.props.forum.book.imgLink,")"):'url( "/uploads/sampleBook.png")'}}),Object(B.jsxs)("div",{className:"forumPeak  text-break "+(this.state.expand?"d-block":"d-none"),children:['"',(null===(e=this.props.forum)||void 0===e?void 0:e.discourse.length)>0&&this.truncate(this.props.forum.discourse[this.props.forum.discourse.length-1].text,100),'"']})]}),Object(B.jsx)("p",{className:"p-0 m-0 forumHost",children:Object(B.jsx)("strong",{children:this.props.forum.host.userName})}),Object(B.jsx)("h5",{children:this.props.forum.book.title}),Object(B.jsx)("br",{}),Object(B.jsxs)("p",{className:"forumTitle p-0 m-0",children:["by ",this.props.forum.book.author]})]})}}]),s}(i.Component)),X=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={forums:[],isLoading:!0},a.checkoutBookClub=a.checkoutBookClub.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("/getForumByCategory",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:this.props.query})}).then(function(){var t=Object(j.a)(p.a.mark((function t(s){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.json();case 2:a=t.sent,200===s.status?e.setState({forums:a.message}):console.log("ERROR: CANT FETCH ERROR");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}},{key:"checkoutBookClub",value:function(e){this.props.history.push({pathname:"/forum",state:{forum:e.forum,bookClubRef:e.bookClubRef}})}},{key:"render",value:function(){var e,t,s,a,o,n,r,i,l,c,u,d,h,m,b,p,j,f=this,v={dots:!0,infinite:!0,speed:500,slidesToShow:(null===(e=this.state.forums)||void 0===e?void 0:e.length)>6?6:null===(t=this.state.forums)||void 0===t?void 0:t.length,slidesToScroll:(null===(s=this.state.forums)||void 0===s?void 0:s.length)>3?3:null===(a=this.state.forums)||void 0===a?void 0:a.length,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:(null===(o=this.state.forums)||void 0===o?void 0:o.length)>4?4:null===(n=this.state.forums)||void 0===n?void 0:n.length,slidesToScroll:(null===(r=this.state.forums)||void 0===r?void 0:r.length)>2?2:null===(i=this.state.forums)||void 0===i?void 0:i.length,infinite:!0,dots:!0}},{breakpoint:768,settings:{slidesToShow:(null===(l=this.state.forums)||void 0===l?void 0:l.length)>3?3:null===(c=this.state.forums)||void 0===c?void 0:c.length,slidesToScroll:(null===(u=this.state.forums)||void 0===u?void 0:u.length)>1?1:null===(d=this.state.forums)||void 0===d?void 0:d.length,infinite:!0,dots:!0}},{breakpoint:580,settings:{slidesToShow:(null===(h=this.state.forums)||void 0===h?void 0:h.length)>2?2:null===(m=this.state.forums)||void 0===m?void 0:m.length,slidesToScroll:(null===(b=this.state.forums)||void 0===b?void 0:b.length)>1?1:null===(p=this.state)||void 0===p?void 0:p.length,infinite:!0,dots:!0}},{breakpoint:425,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0,dots:!0}}]};return Object(B.jsxs)("div",{className:"forumFeature",children:[Object(B.jsx)("h1",{children:this.props.title}),Object(B.jsx)(z.a,Object(H.a)(Object(H.a)({},v),{},{children:null===(j=this.state.forums)||void 0===j?void 0:j.map((function(e,t){return Object(B.jsx)(Y,{forum:e.forum,goTo:function(){return f.checkoutBookClub(e)}},t)}))}))]})}}]),s}(i.Component),W=Object(h.f)(X),Q=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={forum:{img:"sampleBook.png",peak:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas consectetur libero nisi animi, nulla modi officiis explicabo reprehenderit, illum placeat, deleniti quidem alias veritatis aspernatur? Eveniet cum mollitia voluptatibus accusamus velit illo maxime totam expedita inventore ab quidem, ut repudiandae nostrum? Delectus nesciunt nihil blanditiis illum beatae, at quidem a nam quis facilis fugit cum id nisi ipsa soluta inventore reiciendis iusto. Nulla minima hic porro, odio odit quaerat id saepe illo quam aut deserunt, perferendis aliquam iste iusto cum, nesciunt nostrum sed aperiam. Assumenda asperiores ducimus eligendi consequuntur. Dolor maxime, quasi sed culpa doloremque voluptate beatae nesciunt architecto enim?",host:"USER123",title:"The Priory of the Orange Tree",author:"Samantha Shannon"}},a}return Object(v.a)(s,[{key:"render",value:function(){return Object(B.jsxs)("div",{className:"home",children:[Object(B.jsx)(q,{}),Object(B.jsx)(G,{}),Object(B.jsx)(W,{title:"Forums in YA",query:"Juvenile Fiction"}),Object(B.jsx)(W,{title:"Forums in Fiction",query:"Fiction"}),Object(B.jsxs)("footer",{className:"footer text-center d-flex flex-column justify-content-center\r align-items-center",children:["Icons made by Mavadee @",Object(B.jsx)("a",{rel:"noopener noreferrer",href:"https://www.flaticon.com/",target:"_blank",children:"www.flaticon.com"})]})]})}}]),s}(i.Component),K=(s(101),s(102),function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).replyToComment=a.replyToComment.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"replyToComment",value:function(){console.log("REPLY")}},{key:"render",value:function(){var e;return Object(B.jsx)("div",{className:"commentContainer container-fluid px-md-4 px-xxl-5 py-3 m-0 mb-3 "+(this.props.hostComment?"hostComment":""),children:Object(B.jsx)("div",{children:Object(B.jsxs)("div",{className:"comment",children:[Object(B.jsxs)("div",{children:[Object(B.jsx)("h5",{children:this.props.user}),Object(B.jsx)("p",{children:this.props.comment})]}),Object(B.jsxs)("div",{className:"replyContainer position-relative w-100",children:[Object(B.jsx)("button",{className:"position-absolute",onClick:this.props.replyToComment,children:"Reply"}),Object(B.jsxs)("div",{className:"replies",children:[Object(B.jsx)("button",{type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseRepliesComment".concat(this.props.id),"aria-expanded":"false","aria-controls":"collapseRepliesComment".concat(this.props.id),children:"View Replies"}),Object(B.jsx)("div",{className:"collapse",id:"collapseRepliesComment".concat(this.props.id),children:(null===(e=this.props.replies)||void 0===e?void 0:e.length)>0&&this.props.replies.map((function(e,t){return Object(B.jsxs)("div",{className:"commentReply mb-5 mt-3",children:[Object(B.jsx)("h5",{children:e.author.userName}),Object(B.jsx)("p",{children:e.text})]},t)}))})]})]})]})})})}}]),s}(i.Component)),Z=s(21),$=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={showLoginModal:!1,reply:"",replyTo:null,comment:"",showAlert:!1,alertStyle:"",alertDialog:"",bookClubRef:a.props.location.state.bookClubRef,forum:a.props.location.state.forum},a.addComment=a.addComment.bind(Object(O.a)(a)),a.callLogin=a.callLogin.bind(Object(O.a)(a)),a.returnHome=a.returnHome.bind(Object(O.a)(a)),a.goToAuth=a.goToAuth.bind(Object(O.a)(a)),a.showCommentModal=a.showCommentModal.bind(Object(O.a)(a)),a.resetAlert=a.resetAlert.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("scroll",this.callLogin),a=new Z.Modal(document.getElementById("loginPopup"),{backdrop:"static",keyboard:!1,focus:!0}),o=new Z.Modal(document.getElementById("commentModal"),{keyboard:!1,focus:!0}),n=new Z.Modal(document.getElementById("replyModal"),{keyboard:!1,focus:!0}),fetch("/getForum",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookClubRef:this.props.location.state.bookClubRef,forum:this.props.location.state.forum})}).then(function(){var t=Object(j.a)(p.a.mark((function t(s){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.json();case 2:a=t.sent,e.setState({bookClubRef:a.message.bookClubRef,forum:a.message.forum});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.error(e)})),this.setState({forum:this.props.location.state.forum})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.callLogin)}},{key:"callLogin",value:function(){window.pageYOffset>700&&null===this.props.user&&(this.setState({showLoginModal:!0}),a.show())}},{key:"resetAlert",value:function(){this.setState({showAlert:!1,alertStyle:"",alertDialog:""})}},{key:"addComment",value:function(e){var t,s,a=this,r=this.props.user;"COMMENT"===e?(t=this.state.comment,s={bookClubRef:this.state.bookClubRef,forum:this.state.forum,member:r,comment:t}):(t=this.state.reply,s={bookClubRef:this.state.bookClubRef,forum:this.state.forum,member:r,comment:t,replyTo:this.state.replyTo}),fetch("/addToDiscourse",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(function(){var e=Object(j.a)(p.a.mark((function e(t){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:s=e.sent,o.hide(),n.hide(),201===t.status?a.setState({forum:s.message.forum}):a.setState({showAlert:!0,alertStyle:"danger",alertDialog:"Comment not added. Try again later!"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}},{key:"showCommentModal",value:function(e,t){this.props.user?"COMMENT"===e?o.show():(this.setState({replyTo:t}),n.show()):a.show()}},{key:"returnHome",value:function(){a.hide(),this.props.history.push("/")}},{key:"goToAuth",value:function(e){"SIGNUP"===e?(a.hide(),this.props.history.push("/auth")):(a.hide(),this.props.history.push({pathname:"/auth",state:{authType:"LOGIN",fromAuth:!0,authLink:"Sign up here.."}}))}},{key:"render",value:function(){var e,t,s,a,r,i,l=this;return Object(B.jsxs)("div",{className:"position-relative",children:[Object(B.jsx)("div",{className:"modal fade",id:"replyModal","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog",children:Object(B.jsxs)("div",{className:"modal-content position-relative",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("div",{className:"modalAccent position-absolute"}),Object(B.jsx)("button",{onClick:function(){n.hide()},type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})," "]}),Object(B.jsxs)("div",{className:"modal-body text-center p-5 position-relative",children:[Object(B.jsx)("h1",{children:"Reply"}),Object(B.jsx)("textarea",{onChange:function(e){l.setState({reply:e.target.value})},name:"forumComment",id:"forumComment",rows:"5",className:"w-100 forumComment mb-5 mt-3"}),Object(B.jsx)("button",{type:"button",onClick:function(){return l.addComment("REPLY")},className:"btn w-100 rounded-pill",children:"Submit"})]})]})})}),Object(B.jsx)("div",{className:"modal fade",id:"commentModal","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog",children:Object(B.jsxs)("div",{className:"modal-content position-relative",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("div",{className:"modalAccent position-absolute"}),Object(B.jsx)("button",{onClick:function(){o.hide()},type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})," "]}),Object(B.jsxs)("div",{className:"modal-body text-center p-5 position-relative",children:[Object(B.jsx)("h1",{children:"Comment on this Forum!"}),Object(B.jsx)("textarea",{onChange:function(e){l.setState({comment:e.target.value})},name:"forumComment",id:"forumComment",rows:"5",className:"w-100 forumComment mb-5 mt-3"}),Object(B.jsx)("button",{type:"button",onClick:function(){return l.addComment("COMMENT")},className:"btn w-100 rounded-pill",children:"Submit"})]})]})})}),Object(B.jsx)("div",{className:"modal fade",id:"loginPopup","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog",children:Object(B.jsxs)("div",{className:"modal-content position-relative",children:[Object(B.jsx)("div",{className:"modalAccent position-absolute"}),Object(B.jsxs)("div",{className:"modal-body text-center p-5 position-relative",children:[Object(B.jsx)("div",{className:"d-flex justify-content-end mb-4",children:Object(B.jsx)("button",{className:"returnBtn",type:"button",onClick:this.returnHome,children:"Home"})}),Object(B.jsx)("h1",{children:"Join Forum"}),Object(B.jsx)("p",{className:"m-auto mb-4 mt-4 bt-4",children:"Sign up for Forum today to become part of the discussion!"}),Object(B.jsxs)("div",{className:"loginOps d-flex justify-content-center",children:[Object(B.jsx)("button",{onClick:function(){return l.goToAuth("SIGNUP")},className:"btn rounded-pill w-50 me-3",children:"Sign Up"}),Object(B.jsxs)("button",{onClick:function(){return l.goToAuth("LOGIN")},children:[" ","Log in here..."]})]})]})]})})}),Object(B.jsx)(q,{}),Object(B.jsx)("div",{className:"discourseContainer container-fluid",children:Object(B.jsxs)("div",{className:"discourse row",children:[Object(B.jsxs)("div",{className:"discourseSidebar text-break text-center col-12 col-md-3 py-3 d-flex flex-column align-items-center",children:[Object(B.jsx)("p",{children:Object(B.jsxs)("strong",{children:["Forum by ",null===(e=this.state.forum)||void 0===e?void 0:e.host.userName]})}),Object(B.jsx)("img",{className:"rounded-3 pb-3",src:"".concat(null===(t=this.state.forum)||void 0===t?void 0:t.book.imgLink),alt:"Book"}),Object(B.jsx)("h3",{children:null===(s=this.state.forum)||void 0===s?void 0:s.book.title}),Object(B.jsxs)("p",{children:["by ",null===(a=this.state.forum)||void 0===a?void 0:a.book.author]}),Object(B.jsx)("button",{onClick:function(){return l.showCommentModal("COMMENT",null)},className:"btn rounded-pill w-75",children:"Comment"})]}),Object(B.jsxs)("div",{className:"discourseMain col-12 col-md-9 p-0 d-flex flex-column justify-content-between",children:[Object(B.jsxs)("div",{className:"comments pt-3 pb-5 ",children:[this.state.showAlert&&Object(B.jsx)(I,{alertStyle:this.state.alertStyle,alertDialog:this.state.alertDialog,resetAlert:this.resetAlert}),Object(B.jsx)("h1",{className:"px-3 px-md-4 px-xxl-5",children:"Comments"}),(null===(r=this.state.forum)||void 0===r?void 0:r.discourse.length)>0?null===(i=this.state.forum)||void 0===i?void 0:i.discourse.map((function(e,t){var s;return Object(B.jsx)(K,{replyToComment:function(){return l.showCommentModal("REPLY",e)},user:e.author.userName,comment:e.text,hostComment:(null===(s=l.state.forum)||void 0===s?void 0:s.host._id)===e.author._id,id:e._id,replies:e.replies},t)})):Object(B.jsx)("p",{className:"px-3 px-md-4 px-xxl-5",children:"Start the conversation! Leave the first comment for this Forum."})]}),Object(B.jsxs)("footer",{className:"footer text-center d-flex flex-column justify-content-center align-items-center",children:["Icons made by Mavadee @",Object(B.jsx)("a",{rel:"noopener noreferrer",href:"https://www.flaticon.com/",target:"_blank",children:"www.flaticon.com"})]})]})]})})]})}}]),s}(i.Component),ee=Object(h.f)(Object(k.b)((function(e){return{user:e.Auth.user}}))($)),te=(s(30),function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={showViewBtn:!1},a}return Object(v.a)(s,[{key:"render",value:function(){var e=this;return Object(B.jsxs)("div",{className:"activity px-3 px-xl-4 w-100 py-3 mb-2",children:[Object(B.jsxs)("div",{className:"position-relative imgContainer float-start",onMouseOver:function(){e.setState({showViewBtn:!0})},onMouseLeave:function(){e.setState({showViewBtn:!1})},children:[Object(B.jsx)("img",{className:"rounded-3 d-inline-block position-relative "+(this.state.showViewBtn?"activityHover":""),src:"".concat(this.props.img),alt:"Book"}),Object(B.jsx)("div",{className:"coverOver position-absolute",style:{zIndex:this.state.showViewBtn?"5":"-1"}}),Object(B.jsx)("button",{onClick:this.props.goToForum,style:{zIndex:this.state.showViewBtn?"5":"-1"},className:"btn rounded-pill position-absolute top-50 start-0 translate-middle-y",children:"View"})]}),Object(B.jsxs)("p",{children:['"',this.props.recent,'"']})]})}}]),s}(i.Component)),se=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={showBtns:!1},a}return Object(v.a)(s,[{key:"render",value:function(){var e=this;return Object(B.jsxs)("div",{className:"userForum position-relative",onMouseOver:function(){e.setState({showBtns:!0})},onMouseLeave:function(){e.setState({showBtns:!1})},children:[Object(B.jsxs)("div",{className:"forumCover position-relative",children:[Object(B.jsx)("img",{className:"rounded-3 mb-3 "+(this.state.showBtns?"activityHover":""),src:this.props.img,alt:this.props.title}),Object(B.jsx)("div",{className:"coverOver position-absolute",style:{zIndex:this.state.showBtns?"5":"-1"}}),Object(B.jsxs)("div",{style:{zIndex:this.state.showBtns?"5":"-1"},className:"bookClubBtns position-absolute top-50 start-0 translate-middle-y\r ",children:[Object(B.jsx)("button",{onClick:function(){e.props.posMethod(e.props.book)},className:"btn rounded-pill mb-2",children:this.props.posBtn}),this.props.negMethod&&Object(B.jsx)("button",{onClick:this.props.negMethod,className:"btn rounded-pill",children:this.props.negBtn})]})]}),Object(B.jsx)("h6",{className:"mb-0",children:this.props.title}),Object(B.jsxs)("p",{children:["by ",this.props.author]})]})}}]),s}(i.Component);var ae=function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={user:{},userBookClub:{},memberships:[],recentActivity:[],profileUpdate:{},showAlert:!1,alertStyle:"",alertDialog:"",isMounted:!1},a.getProfile=a.getProfile.bind(Object(O.a)(a)),a.checkoutBookClub=a.checkoutBookClub.bind(Object(O.a)(a)),a.exposeViewBtn=a.exposeViewBtn.bind(Object(O.a)(a)),a.hideVeiwBtn=a.hideVeiwBtn.bind(Object(O.a)(a)),a.handleInput=a.handleInput.bind(Object(O.a)(a)),a.delForum=a.delForum.bind(Object(O.a)(a)),a.logout=a.logout.bind(Object(O.a)(a)),a.updateProfile=a.updateProfile.bind(Object(O.a)(a)),a.execProfileChange=a.execProfileChange.bind(Object(O.a)(a)),a.execImageChange=a.execImageChange.bind(Object(O.a)(a)),a.execDelete=a.execDelete.bind(Object(O.a)(a)),a.resetAlert=a.resetAlert.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0}),this.getProfile(),r=new Z.Modal(document.getElementById("profileModal"))}},{key:"componentDidUpdate",value:function(e,t){this.state.userBookClub===t.userBookClub&&this.state.memberships===t.memberships||(console.log("Making an update!"),this.getProfile())}},{key:"getProfile",value:function(){var e=this;fetch("/getProfile",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(j.a)(p.a.mark((function t(s){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.json();case 2:if(a=t.sent,200!==s.status){t.next=8;break}return e.setState({userBookClub:null===a.message.userBookClub||0===a.message.userBookClub.length?null:a.message.userBookClub[0],memberships:a.message.memberForums}),t.abrupt("return",a.message.memberForums.forums);case 8:console.log(a.message);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}},{key:"delForum",value:function(e){var t=this;fetch("/delForum",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookClubRef:this.state.userBookClub._id,forum:e})}).then(function(){var e=Object(j.a)(p.a.mark((function e(s){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.json();case 2:a=e.sent,200!==s.status?t.setState({showAlert:!0,alertStyle:"danger",alertDialog:a.message}):t.setState({showAlert:!0,alertStyle:"success",alertDialog:"Forum deleted successfully.",userBookClub:a.message.bookClub,memberships:a.message.memberForums});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}},{key:"logout",value:function(){var e=this;fetch("/logout/removeFiles",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(j.a)(p.a.mark((function e(t){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return s=e.sent,e.abrupt("return",{status:t.status,data:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){200===t.status&&(e.props.dispatch(A()),e.props.history.push("/"))})).catch((function(e){return console.log(e)}))}},{key:"resetAlert",value:function(){this.setState({showAlert:!1,alertStyle:"",alertDialog:""})}},{key:"checkoutBookClub",value:function(e){this.props.history.push({pathname:"/forum",state:{forum:e,bookClubRef:this.state.userBookClub._id}})}},{key:"exposeViewBtn",value:function(e){document.getElementById(e).style.zIndex=-1}},{key:"hideVeiwBtn",value:function(){document.querySelector(".activity img").style.zIndex=2}},{key:"updateProfile",value:function(e,t){switch(e.preventDefault(),t){case"PROFILE":this.execProfileChange();break;case"IMAGE":this.execImageChange();break;case"DELETE":this.execDelete()}}},{key:"execProfileChange",value:function(){var e,t,s,a=this,o={queryEmail:this.state.confirmEmail,update:{}};null!==this.state.userName&&(null===(e=this.state.userName)||void 0===e?void 0:e.length)>0&&(o.update.userName=this.state.userName),null!==this.state.email&&(null===(t=this.state.email)||void 0===t?void 0:t.length)>0&&(o.update.email=this.state.email),null!==this.state.password&&(null===(s=this.state.password)||void 0===s?void 0:s.length)>0&&(o.update.password=this.state.password),fetch("/updateProfile",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(){var e=Object(j.a)(p.a.mark((function e(t){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return s=e.sent,e.abrupt("return",{status:t.status,data:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){200===e.status&&(r.hide(),a.setState({showAlert:!0,alertStyle:"success",alertDialog:"Profile updated successfully!"}),a.props.dispatch(S(e.data.message)))})).catch((function(e){return console.log(e)}))}},{key:"execImageChange",value:function(){var e=this;!function(e,t){var s=[{mime:"image/jpeg",pattern:[255,216,255],mask:[255,255,255]},{mime:"image/png",pattern:[137,80,78,71],mask:[255,255,255,255]}];function a(e,t){for(var s=0,a=t.mask.length;s<a;++s)if((e[s]&t.mask[s])-t.pattern[s]!==0)return!1;return!0}var o=e.slice(0,4),n=new FileReader;n.onloadend=function(e){if(e.target.readyState===FileReader.DONE){for(var o=new Uint8Array(e.target.result),n=0,r=s.length;n<r;++n)if(a(o,s[n]))return t(!0);return t(!1)}},n.readAsArrayBuffer(o)}(this.state.profiileImage,(function(t){if(t){var s=new FormData;s.append("email",e.state.confirmEmail),s.append("img",e.state.profiileImage),fetch("/updateProfileImage",{method:"POST",mode:"cors",body:s}).then(function(){var t=Object(j.a)(p.a.mark((function t(s){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.json();case 2:a=t.sent,200!==s.status?(r.hide(),e.setState({showAlert:!0,alertStyle:"danger",alertDialog:a.message})):(r.hide(),e.setState({showAlert:!0,alertStyle:"success",alertDialog:"Profile updated successfully!"}),e.props.dispatch(S(a.message)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}else r.hide(),e.setState({showAlert:!0,alertStyle:"danger",alertDialog:"File type not accepted. Please upload a .png or .jpg image file."})}))}},{key:"execDelete",value:function(){var e=this,t={email:this.state.confirmEmail,password:this.state.confirmPassword};fetch("/delAcct",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(j.a)(p.a.mark((function t(s){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.json();case 2:a=t.sent,200!==s.status?e.setState({showAlert:!0,alertStyle:"danger",alertDialog:a.message}):(r.hide(),e.props.dispatch(A()),e.props.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}))}},{key:"handleInput",value:function(e){"file"===e.target.type?this.setState({profiileImage:e.target.files[0]}):this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e,t,s,a,o,n,i,l,c,u=this;return Object(B.jsxs)("div",{className:"profilePage",children:[Object(B.jsx)(q,{}),Object(B.jsx)("div",{className:"modal fade",id:"profileModal",tabIndex:"-1","aria-labelledby":"profileModalLabel","aria-hidden":"true",children:Object(B.jsx)("div",{className:"modal-dialog",children:Object(B.jsxs)("div",{className:"modal-content",children:[Object(B.jsxs)("div",{className:"modal-header",children:[Object(B.jsx)("h1",{children:"Profile Edit"}),Object(B.jsx)("button",{onClick:function(){r.hide()},type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(B.jsxs)("div",{className:"modal-body",children:[Object(B.jsxs)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[Object(B.jsx)("li",{className:"nav-item",role:"presentation",children:Object(B.jsx)("button",{className:"nav-link active",id:"image-tab","data-bs-toggle":"tab","data-bs-target":"#image",type:"button",role:"tab","aria-controls":"image","aria-selected":"true",children:"Image"})}),Object(B.jsx)("li",{className:"nav-item",role:"presentation",children:Object(B.jsx)("button",{className:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false",children:"Profile"})}),Object(B.jsx)("li",{className:"nav-item",role:"presentation",children:Object(B.jsx)("button",{className:"nav-link",id:"delete-tab","data-bs-toggle":"tab","data-bs-target":"#delete",type:"button",role:"tab","aria-controls":"delete","aria-selected":"false",children:"Delete Account"})})]}),Object(B.jsxs)("div",{className:"tab-content p-3 mb-5",children:[Object(B.jsxs)("div",{className:"tab-pane active",id:"image",role:"tabpanel","aria-labelledby":"image-tab",children:[Object(B.jsx)("h5",{className:"mb-3 fs-6",children:"Select a new profile image."}),Object(B.jsxs)("form",{id:"imageForm",name:"imageForm",encType:"multipart/form-data",onSubmit:function(e){u.updateProfile(e,"IMAGE")},children:[Object(B.jsx)("input",{onChange:function(e){u.handleInput(e)},type:"confirmEmail",name:"confirmEmail",placeholder:"Current Email",className:"formControl w-100",required:!0}),Object(B.jsx)("input",{onChange:function(e){return u.handleInput(e)},type:"file",name:"profileImage",id:"profileImage",className:"form-control",accept:"image/*"}),Object(B.jsx)("button",{className:"btn w-100 rounded-pill mt-3",children:"Update"})]})]}),Object(B.jsxs)("div",{className:"tab-pane",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab",children:[Object(B.jsx)("h5",{className:"mb-3 fs-6",children:"Update your profile."}),Object(B.jsxs)("form",{onSubmit:function(e){u.updateProfile(e,"PROFILE")},children:[Object(B.jsx)("input",{onChange:function(e){u.handleInput(e)},type:"confirmEmail",name:"confirmEmail",placeholder:"Current Email",className:"formControl w-100",required:!0}),Object(B.jsx)("input",{onChange:function(e){u.handleInput(e)},type:"text",name:"userName",placeholder:"New Username",className:"formControl w-100"}),Object(B.jsx)("input",{onChange:function(e){u.handleInput(e)},type:"email",name:"email",placeholder:"New Email",className:"formControl w-100"}),Object(B.jsx)("input",{onChange:function(e){u.handleInput(e)},type:"password",name:"password",placeholder:"New Password",className:"formControl w-100"}),Object(B.jsx)("button",{type:"submit",className:"btn w-100 rounded-pill",children:"Update"})]})]}),Object(B.jsxs)("div",{className:"tab-pane",id:"delete",role:"tabpanel","aria-labelledby":"delete-tab",children:[Object(B.jsx)("h5",{className:"mb-3 fs-6",children:"Sorry to see you go! Please confirm your login to delete your account."}),Object(B.jsxs)("form",{onSubmit:function(e){u.updateProfile(e,"DELETE")},children:[Object(B.jsx)("input",{onChange:function(e){u.handleInput(e)},type:"confirmEmail",name:"confirmEmail",placeholder:"Email",className:"formControl w-100",required:!0}),Object(B.jsx)("input",{onChange:function(e){u.handleInput(e)},type:"confirmPassword",name:"confirmPassword",placeholder:"Password",required:!0,className:"formControl w-100"}),Object(B.jsx)("button",{type:"submit",className:"btn w-100 rounded-pill",children:"Delete Account"})]})]})]})]})]})})}),Object(B.jsx)("div",{className:"profileContainer container-fluid",children:Object(B.jsxs)("div",{className:"profile row",children:[Object(B.jsxs)("div",{className:"profileSidebar text-break text-center col-12 col-md-3 col-lg-2 py-3 d-flex flex-column align-items-center",children:[Object(B.jsx)("img",{src:(null===(e=this.props.user)||void 0===e?void 0:e.img)?"/uploads/".concat(null===(t=this.props.user)||void 0===t?void 0:t.img):"/uploads/sampleUser.png",alt:"User",className:"rounded-circle mb-2"}),Object(B.jsx)("button",{onClick:function(){r.show()},className:"imgEdit mb-3 mb-md-5",children:"Edit Image"}),Object(B.jsx)("h1",{children:null===(s=this.props.user)||void 0===s?void 0:s.userName}),Object(B.jsxs)("p",{className:"mb-3 mb-md-5",children:["Member Since"," ",new Date(null===(a=this.props.user)||void 0===a?void 0:a.memberDate).toLocaleDateString()]}),Object(B.jsx)("button",{onClick:function(){r.show()},className:"btn rounded-pill mb-1 w-75 editBtn",children:"Edit Profile"}),Object(B.jsx)("button",{onClick:this.logout,className:"btn rounded-pill mb-5 w-75",children:"Logout"}),Object(B.jsx)("button",{onClick:function(){r.show()},className:"btn delAcctBtn rounded-pill w-75",children:"Delete Account"})]}),Object(B.jsxs)("div",{className:"profileMain col-12 col-md-9 col-lg-10 p-0 d-flex flex-column justify-content-between",children:[Object(B.jsxs)("div",{className:"profileMainContent py-3  ",children:[this.state.showAlert&&Object(B.jsx)(I,{alertStyle:this.state.alertStyle,alertDialog:this.state.alertDialog,resetAlert:this.resetAlert}),Object(B.jsx)("h1",{className:"px-3 px-xl-4",children:"Forums in Your Book Club"}),null===this.state.userBookClub||0===(null===(o=this.state.userBookClub)||void 0===o||null===(n=o.forums)||void 0===n?void 0:n.length)?Object(B.jsxs)("p",{className:"px-3 px-xl-4",children:["Start your Book Club today! Use the search bar to select a book to create your first ",Object(B.jsx)("strong",{children:"Forum"}),"."]}):Object(B.jsx)("div",{children:Object(B.jsx)("div",{className:"userForums mb-5 d-flex px-3 px-xl-4",children:null===(i=this.state.userBookClub.forums)||void 0===i?void 0:i.map((function(e,t){return Object(B.jsx)(se,{book:e.book,title:e.book.title,author:e.book.author,img:null!==e.book.imgLink?e.book.imgLink:"/uploads/sampleBook.png",posMethod:function(){return u.checkoutBookClub(e)},posBtn:"View",negMethod:function(){return u.delForum(e)},negBtn:"Delete"},t)}))})}),Object(B.jsx)("h1",{className:"px-3 px-xl-4 mb-3",children:"Recent Activity in Book Clubs You Belong To"}),null===this.state.memberships||void 0===this.state.memberships||0===(null===(l=this.state.memberships)||void 0===l?void 0:l.length)?Object(B.jsxs)("p",{className:"px-3 px-xl-4 mb-3",children:["Join a Book Club today! Use the search bar to find a"," ",Object(B.jsx)("strong",{children:"Forum"})," hosted for your favorite book."]}):Object(B.jsx)("div",{children:Object(B.jsx)("div",{className:"recentActivity d-flex flex-wrap mb-5",children:null===(c=this.state.memberships)||void 0===c?void 0:c.map((function(e,t){return Object(B.jsx)(te,{goToForum:function(){return u.checkoutBookClub(e)},img:e.book.imgLink,recent:void 0!==e.discourse[e.discourse.length-1]?e.discourse[e.discourse.length-1].text:"No comments yet! Vist this forum to get the ball rolling."},t)}))})})]}),Object(B.jsxs)("footer",{className:"footer text-center d-flex flex-column justify-content-center align-items-center",children:["Icons made by Mavadee @",Object(B.jsx)("a",{rel:"noopener noreferrer",href:"https://www.flaticon.com/",target:"_blank",children:"www.flaticon.com"})]})]})]})})]})}}]),s}(i.Component),oe=Object(h.f)(Object(k.b)((function(e){return{user:e.Auth.user}}))(ae)),ne=(s(105),function(e){Object(x.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(f.a)(this,s),(a=t.call(this,e)).state={fromAPI:!0,results:[],showAlert:!1,alertStyle:"",alertDialog:""},a.createForum=a.createForum.bind(Object(O.a)(a)),a.resetAlert=a.resetAlert.bind(Object(O.a)(a)),a.viewForum=a.viewForum.bind(Object(O.a)(a)),a}return Object(v.a)(s,[{key:"createForum",value:function(e){var t=this;this.props.user?fetch("/createForum",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(){var e=Object(j.a)(p.a.mark((function e(s){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.json();case 2:a=e.sent,201!==s.status?t.setState({showAlert:!0,alertStyle:"danger",alertDialog:"Error occured. Please try again later."}):t.props.history.push({pathname:"/forum",state:{forum:a.message.forum,bookClubRef:a.message.bookClubRef}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)})):this.props.history.push("/auth")}},{key:"viewForum",value:function(e){this.props.history.push({pathname:"/forum",state:{forum:e.forum,bookClubRef:e.bookClubRef}})}},{key:"componentDidMount",value:function(){var e=this.props.location.state.received;if(e){for(var t=[],s=0;s<(null===(a=e)||void 0===a?void 0:a.length);s++){var a,o,n,r,i,l,c={title:null===(o=e[s])||void 0===o?void 0:o.title,img:null==(null===(n=e[s])||void 0===n?void 0:n.imageLinks)?"uploads/sampleBook.png":null===(r=e[s])||void 0===r?void 0:r.imageLinks[0],author:null==(null===(i=e[s])||void 0===i?void 0:i.authors)?"None":null===(l=e[s])||void 0===l?void 0:l.authors[0],searchCategories:e[s].categories};t.push(c)}this.setState({fromAPI:this.props.location.state.fromAPI,results:t})}else e=this.props.location.state.fetched,this.setState({results:e,fromAPI:!1})}},{key:"componentDidUpdate",value:function(e){if(this.props.location.state!==e.location.state){var t=this.props.location.state.received;if(t){for(var s=[],a=0;a<(null===(o=t)||void 0===o?void 0:o.length);a++){var o,n,r,i,l,c,u={title:null===(n=t[a])||void 0===n?void 0:n.title,img:null==(null===(r=t[a])||void 0===r?void 0:r.imageLinks)?"uploads/sampleBook.png":null===(i=t[a])||void 0===i?void 0:i.imageLinks[0],author:null==(null===(l=t[a])||void 0===l?void 0:l.authors)?"None":null===(c=t[a])||void 0===c?void 0:c.authors[0],searchCategories:t[a].categories};s.push(u)}this.setState({fromAPI:this.props.location.state.fromAPI,results:s})}else t=this.props.location.state.fetched,this.setState({results:t,fromAPI:!1})}}},{key:"resetAlert",value:function(){this.setState({showAlert:!1,alertStyle:"",alertDialog:""})}},{key:"render",value:function(){var e=this;return Object(B.jsxs)("div",{children:[Object(B.jsx)(q,{}),this.state.showAlert&&Object(B.jsx)(I,{alertStyle:this.state.alertStyle,alertDialog:this.state.alertDialog,resetAlert:this.resetAlert}),Object(B.jsxs)("div",{className:"resultsContent container",children:[Object(B.jsx)("h1",{children:"Search Results"}),Object(B.jsx)("div",{className:"results d-flex",children:0===this.state.results.length?"Sorry, no items found. Try another search.":!0===this.state.fromAPI?this.state.results.map((function(t,s){return Object(B.jsx)("div",{className:"me-3 position-relative result",children:Object(B.jsx)(se,{title:t.title,author:t.author,img:null!==t.img?t.img:"/uploads/sampleBook.png",book:t,fromAPI:e.state.fromAPI,posMethod:e.createForum,posBtn:"Create"},s)},s)})):this.state.results.map((function(t,s){return Object(B.jsx)("div",{className:"me-3 position-relative result",children:Object(B.jsx)(se,{title:t.forum.book.title,author:t.forum.book.author,img:null!==t.forum.book.imgLink?t.forum.book.imgLink:"/uploads/sampleBook.png",book:t.forum,fromAPI:e.state.fromAPI,posMethod:function(){return e.viewForum(t)},posBtn:"View"},s)},s)}))})]})]})}}]),s}(i.Component)),re=Object(h.f)(Object(k.b)((function(e){return{user:e.Auth.user}}))(ne));var ie=function(){return Object(B.jsx)("div",{className:"App",children:Object(B.jsx)(d.a,{children:Object(B.jsxs)(h.c,{children:[Object(B.jsx)(h.a,{path:"/auth",children:Object(B.jsx)(F,{})}),Object(B.jsx)(h.a,{path:"/",exact:!0,children:Object(B.jsx)(Q,{})}),Object(B.jsx)(h.a,{path:"/forum",children:Object(B.jsx)(ee,{})}),Object(B.jsx)(h.a,{path:"/profile",children:Object(B.jsx)(oe,{})}),Object(B.jsx)(h.a,{path:"/results",children:Object(B.jsx)(re,{})})]})})})};u.a.render(Object(B.jsx)(l.a.StrictMode,{children:Object(B.jsx)(k.a,{store:R,children:Object(B.jsx)(ie,{})})}),document.getElementById("root"))},30:function(e,t,s){},53:function(e,t,s){},55:function(e,t,s){},62:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){}},[[106,1,2]]]);
//# sourceMappingURL=main.24ddbb45.chunk.js.map